!function(t,e,i,r){"use strict";var a={};a.init=function(){this.show_mini_cart(),this.close_mini_cart(),this.empty_mini_cart(),this.remove_product_in_mini_cart(),this.show_info_after_product_added(),this.quantity_input()},a.show_mini_cart=function(){t("body").on("click",".zt-mini-cart__btn",function(){i.querySelector(".zt-mini-cart").classList.add("zt-mini-cart--open"),i.body.style.overflow="hidden"})},a.close_mini_cart=function(){t("body").on("click",".zt-mini-cart__close",function(){i.querySelector(".zt-mini-cart").classList.remove("zt-mini-cart--open"),i.body.style.overflow=""})},a.show_info_after_product_added=function(){t(i).ajaxSuccess(function(t,e,r){-1!==r.url.indexOf("?wc-ajax=add_to_cart")&&(i.querySelector("body").innerHTML+='<div class="zt-mini-cart__message"><p>Product has been added to your cart.</p></div>',setTimeout(function(){i.querySelector(".zt-mini-cart__message")&&i.querySelector(".zt-mini-cart__message").classList.add("zt-mini-cart__message--active")},500),setTimeout(function(){i.querySelector(".zt-mini-cart__message")&&i.querySelector(".zt-mini-cart__message").remove()},3e3))})},a.empty_mini_cart=function(){t("body").on("click",".js-empty-cart",function(e){return e.preventDefault(),t.ajax({type:"POST",url:mini_cart_data.ajax_url,data:{action:"empty_mini_cart","empty-cart":!0},beforeSend:function(){var t='<div class="zt-mini-cart__loader"><img src="'+mini_cart_data.site_url+'/assets/img/ajax-loader.gif" /></div>';i.querySelector(".zt-mini-cart__content").innerHTML+=t},success:function(t){var e=i.querySelector(".js-empty-cart");e.classList.add("zt-mini-cart__link--disabled"),e.classList.remove("js-empty-cart"),t=JSON.parse(t),i.querySelector(".zt-mini-cart__loader").remove(),i.querySelector(".zt-mini-cart__count").innerHTML="0",i.querySelector(".zt-mini-cart__list").innerHTML="<p>"+t.message+"</p>",i.querySelector(".zt-mini-cart__subtotal").innerHTML="<p>"+t.subtotal+"</p>"}}),!1})},a.remove_product_in_mini_cart=function(){t("body").on("click",".zt-mini-cart__remove-item",function(e){e.preventDefault();var r=this.getAttribute("data-product_id"),a=this.getAttribute("data-cart_item_key");return t.ajax({type:"POST",dataType:"json",url:mini_cart_data.ajax_url,data:{action:"remove_product_in_mini_cart",product_id:r,cart_item_key:a},beforeSend:function(){var t='<div class="zt-mini-cart__loader"><img src="'+mini_cart_data.site_url+'/assets/img/ajax-loader.gif" /></div>';i.querySelector(".zt-mini-cart__content").innerHTML+=t},success:function(e){e&&!e.error&&(i.querySelector(".zt-mini-cart__loader").remove(),t.each(e.fragments,function(e,i){t(e).replaceWith(i)}))}}),!1})},a.quantity_input=function(){i.querySelector("body").addEventListener("click",function(e){if(!e.target.hasAttribute("data-type"))return!1;e.preventDefault();var i=e.target.parentElement.querySelector('input[type="number"]');if("add"===e.target.getAttribute("data-type")&&i.value>=1)i.value++;else{if(1===parseInt(i.value))return!1;i.value--}t(e.target).closest(".zt-mini-cart__list").length&&a.update_mini_cart(e.target,i.value)})},a.update_mini_cart=function(e,r){var a=t(e).parent().find('input[type="number"]').attr("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1");return t.ajax({url:mini_cart_data.ajax_url,type:"POST",data:{action:"update_quantity_product",item_hash:a,quantity:r},beforeSend:function(){var t='<div class="zt-mini-cart__loader"><img src="'+mini_cart_data.site_url+'/assets/img/ajax-loader.gif" /></div>';i.querySelector(".zt-mini-cart__content").innerHTML+=t},success:function(e){e&&!e.error&&(i.querySelector(".zt-mini-cart__loader").remove(),t.each(e.fragments,function(e,i){t(e).replaceWith(i)}))}}),!1},i.addEventListener("DOMContentLoaded",function(){a.init()})}(jQuery,window,document);